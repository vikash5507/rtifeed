{% extends 'base.html' %}
{% block content %}

<div class="content-wrapper">


  <br>
  <div class="col-md-4">
    <div class = "box box-primary">
    <div class = "box-header">
      <h3 class="box-title"><a href="/messages">Messages</a></h3>
      <button class = "btn btn-primary pull-right" data-toggle="modal" data-target="#messagemodal">Compose</button>
    </div>
    <div class = "box-body" style = "height : 450px;">
      {% include 'Messenger/contact_list.html' %}
    </div>
    </div>
  </div>
  {% if other_username %}
  <div class = "col-md-8">
    
    <div class="box box-primary direct-chat direct-chat-primary" >
      <div class="box-header with-border">
        <h3 class="box-title"><a href="/profile/{{other_username}}"> {{ other_user_name }} </a></h3>
        <div id = "message_loader" class = "pull-right" style = "display : none">
        <img src="/static/dist/img/spinner2.gif" style = "height : 30px; width : 30px;">
        </div>

        <!-- <div class="box-tools pull-right">
          <span data-toggle="tooltip" title="3 New Messages" class="badge bg-yellow">3</span>
          <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
          </button>
          <button type="button" class="btn btn-box-tool" data-toggle="tooltip" title="Contacts" data-widget="chat-pane-toggle">
            <i class="fa fa-comments"></i></button>
          <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i>
          </button>
        </div> -->
      </div>
      <!-- /.box-header -->
      <div class="box-body">
        <div class="direct-chat-messages" id = "messages_container" style = "height : 400px;">
          
        </div>
      </div>
      <!-- /.box-body -->
      <div class="box-footer">
        
          <div class="input-group">
            <input type="text" name="message" placeholder="Type Message ..." class="form-control" id = "message_box"></input>
                <span class="input-group-btn">
                  <button type="button" class="btn btn-primary" id ="send_button">Send</button>
                </span>
          </div>
        
      </div>
      <!-- /.box-footer-->
    </div>
    
  </div>
  {% endif %}

<div id="messagemodal" class="modal fade" role="dialog">
  <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">Ã—</span></button>
      <h4 class="modal-title" id="myModalLabel">Write a new message</h4>
    </div>
    
      <div class="modal-body">
        
        <div class="form-group">
          <label for="content">To: </label>
          <input type = "text" placeholder = "Find People" id = "message_modal_search" style="width : 200px;">
        </div>

        <div class="form-group">
          <label for="content">Message</label>
          <textarea class="form-control" id="message_modal_text" name="message_modal_text" placeholder="Message.."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <div class="form-group">
          <button type="button" id = "close_message_modal" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" id = "message_modal_button" class="btn btn-primary">Send Message</button>
        </div>
      </div>
      
    </div>
  </div>
</div>

</div>

<!--</div>-->
{% if other_username %}


<script type="text/javascript">

var other_username = "{{ other_username }}"

</script>
<script src="/static/scripts/messaging.js"></script>
{% endif %}

{% endblock %}